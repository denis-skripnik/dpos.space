{"version":3,"sources":["service/opschemas.js","service/operation.js","service/sign.js","components/SignErrorsView.jsx","components/SignFormComponents.jsx","components/SignForm.jsx","components/OperationDetails.jsx","components/TransactionView.jsx","components/ErrorsView.jsx","components/App.js","serviceWorker.js","index.js"],"names":["opschemas","$id","type","minItems","items","$ref","pattern","minimum","maximum","maxLength","enum","ROLES_PRIORITY","owner","active","posting","memo","sort_roles","roles","sort","a","b","validate","Ajv","schemas","VizSchema","verbose","getSchema","Transaction","json","Object","classCallCheck","this","errors","raw_transaction","toConsumableArray","ops","readOps","createClass","key","value","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","opTuple","push","Operation","err","return","get","length","temp","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","op","role","name","body","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","operations","operation","viz","require","SIGN_TYPE","PASSWORD","WIF","_callee","transaction","sign_type","account","password","required_wif","wif","tx","prepared_tx","signed_tx","ret","regenerator_default","wrap","_context","prev","getWif","extensions","defineProperty","broadcast","_prepareTransaction","sent","auth","signTransaction","api","broadcastTransactionSynchronousAsync","abrupt","stop","getPrivateKeys","_callee2","_ref","_ref2","_context2","getAccountsAsync","slicedToArray","signandsend","ERROR_DESC","Expected version","3020100","2020000","3080000","2030000","1020400","4020100","3010000","getDesc","msg","match","SignErrorsView","_Component","possibleConstructorReturn","getPrototypeOf","apply","arguments","inherits","error","props","console","log","react_default","createElement","message","arr","split","i","className","desc","result","block_num","id","redirect","isError","alert","extractErrorMessage","extractUsefulInfos","Component","WifInput","wif_class","wif_error","onChange","ev","target","aria-describedby","required","SignButton","onClick","onSign","FormWif","form_class","htmlFor","SignFormComponents_WifInput","assign","translate_role","SignFormComponents_SignButton","FormAccountAndPasswort","account_error","account_class","placeholder","FormSelector","SignFormComponents_FormWif","SignFormComponents_FormAccountAndPasswort","SignForm","_this","call","state","user","sending","_this2","then","onSuccess","catch","setState","_this3","setTimeout","window","location","_this4","_x5","_checkAccount","checkAccount","send","_this$setState","_this5","_this$props","nowif","TabButton","label","react_responsive_default","minWidth","maxWidth","components_SignErrorsView","SignFormComponents_FormSelector","is_pass","icon","index_esm","title","OP_TRANSLATIONS","vote","comment","transfer","transfer_to_vesting","withdraw_vesting","limit_order_create","limit_order_cancel","account_create","account_update","witness_update","account_witness_vote","account_witness_proxy","custom","report_over_production","delete_comment","custom_json","comment_options","set_withdraw_vesting_route","limit_order_create2","challenge_authority","prove_authority","request_account_recovery","recover_account","change_recovery_account","escrow_transfer","escrow_dispute","escrow_release","pow2","escrow_approve","transfer_to_savings","transfer_from_savings","cancel_transfer_from_savings","custom_binary","decline_voting_rights","reset_account","set_reset_account","delegate_vesting_shares","account_create_with_delegation","account_metadata","proposal_create","proposal_update","proposal_delete","chain_properties_update","break_free_referral","delegate_vesting_shares_with_interest","reject_vesting_shares_delegation","TransactionView","status","components_SignForm","map","getOpName","from","to","amount","substring","JSON","stringify","getOpDetails","ErrorsView","e","keyword","dataPath","schemaPath","NODES","node","localStorage","getItem","find","idx","config","set","timeout","timer","getDynamicGlobalPropertiesAsync","head_block_number","setItem","clearTimeout","Math","max","indexOf","checkWorkingNode","ErrorMessage","App","params","queryString","parse","search","subtitle","keys","includes","sanatizer","sanitizeUrl","tr","content","components_TransactionView","App_ErrorMessage","components_ErrorsView","rel","href","Boolean","hostname","ReactDOM","render","src_components_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.e1614b25.chunk.js","sourcesContent":["/*\n* Схемы операций для валидирования.\n*/\n\n/**\n * Взято из исходников голоса\n */\nconst known_operations = [\n    \"vote\",\n    \"comment\",\n\n    \"transfer\",\n    \"transfer_to_vesting\",\n    \"withdraw_vesting\",\n\n    \"limit_order_create\",\n    \"limit_order_cancel\",\n\n    \"feed_publish\",\n    \"convert\",\n\n    \"account_create\",\n    \"account_update\",\n\n    \"witness_update\",\n    \"account_witness_vote\",\n    \"account_witness_proxy\",\n\n    \"pow\",\n\n    \"custom\",\n\n    \"report_over_production\",\n\n    \"delete_comment\",\n    \"custom_json\",\n    \"comment_options\",\n    \"set_withdraw_vesting_route\",\n    \"limit_order_create2\",\n    \"challenge_authority\",\n    \"prove_authority\",\n    \"request_account_recovery\",\n    \"recover_account\",\n    \"change_recovery_account\",\n    \"escrow_transfer\",\n    \"escrow_dispute\",\n    \"escrow_release\",\n    \"pow2\",\n    \"escrow_approve\",\n    \"transfer_to_savings\",\n    \"transfer_from_savings\",\n    \"cancel_transfer_from_savings\",\n    \"custom_binary\",\n    \"decline_voting_rights\",\n    \"reset_account\",\n    \"set_reset_account\",\n    \"delegate_vesting_shares\",\n    \"account_create_with_delegation\",\n    \"account_metadata\",\n    \"proposal_create\",\n    \"proposal_update\",\n    \"proposal_delete\",\n    \"chain_properties_update\",\n    \"break_free_referral\",\n    \"delegate_vesting_shares_with_interest\",\n    \"reject_vesting_shares_delegation\",    \n]\n\n\n/**\n * Схема параметра transaction. Ожидается массив (Array) операций\n */\nconst transaction = {\n    \"$id\" : \"/viz/transaction\",\n    type: \"array\",\n    minItems: 1,\n    items: [ \n        {\"$ref\": \"/viz/operation\"}\n    ]\n}\n\n/**\n * Операция \n */\nconst operation = {\n    \"$id\" : \"/viz/operation\",\n    type: \"array\",\n    minItems: 2, maxLength: 2,\n    items: [\n        {type: \"string\", enum: known_operations},\n        {type: \"object\"}\n    ]\n}\n\n\nconst account = {\n    \"$id\" : \"/viz/account\",\n    type: \"string\",\n    pattern: \"^[a-z][-\\\\.a-z\\\\d]{2,15}[a-z\\\\d]$\"\n}\n\nconst permlink = {\n    \"$id\" : \"/viz/permlink\",\n    type: \"string\",\n    pattern: \"^.{1,256}$\"\n}\n\nconst public_key = {\n    \"$id\" : \"/viz/public_key\",\n    type: \"string\",\n    pattern: \"^GLS[0-9a-zA-Z]{50}$\"\n}\n\nconst percent = {\n    \"$id\" : \"/viz/percent\",\n    type: \"integer\",\n    minimum: 0, \n    maximum: 10000\n}\n\nconst asset = {\n    \"$id\" : \"/viz/asset\",\n    type: \"string\",\n    pattern: \"^[0-9]+\\\\.[0-9]{3} (viz|GBG)$\"\n}\n\nexport default [\n    //базовые типы\n    transaction,\n    account,\n    asset,\n    permlink,\n    public_key,\n    percent, \n\n    operation,\n]\n\n","/*\n* Вспомогательные классы для валидирования входных данных (операций) и для отображения.\n*/\nimport Ajv from \"ajv\";\nimport VizSchema from \"./opschemas\";\n\nimport operations from \"viz-js-lib/lib/broadcast/operations\";\n\nconst ROLES_PRIORITY = {\n    \"owner\" : 0,\n    \"active\" : 1,\n    \"posting\" : 2,\n    \"memo\" : 3\n}\n\nfunction sort_roles(roles) {\n    return roles.sort((a,b) => {\n        return ROLES_PRIORITY[b] - ROLES_PRIORITY[a];\n    })\n}\n\nconst ajv = new Ajv({schemas: VizSchema, verbose: true});\nconst validate = ajv.getSchema(\"/viz/transaction\");\n\nexport class Transaction {\n    constructor(json) {\n        if(!validate(json)) {\n            \n            throw validate.errors;\n        }\n        this.raw_transaction = [...json];\n        this.ops = [];\n        this.readOps();\n    }\n\n    /**\n     * Вернуть минимальную, требуемую роль\n     */\n    get required_wif() {\n        if(this.ops.length == 0) {\n            return null;\n        }\n        const temp = [];\n        for(let op of this.ops) {\n            temp.push(op.role);\n        }\n        return sort_roles(temp)[0];\n    }\n\n    readOps() {\n        for(let opTuple of this.raw_transaction) {\n            this.ops.push(new Operation(opTuple[0], opTuple[1]));\n        }\n    }\n}\n\nclass Operation {\n    constructor(name, body) {\n        this.name = name;\n        this.body = body;\n\n        for(let op of operations) {\n            if(op.operation === this.name) {\n                this.roles = sort_roles(op.roles);\n            }\n        }\n    }\n\n    get role() {\n        //Вернуть самый слабый ключ \n        return this.roles[0];\n    }\n    \n}\n\n//////////////////////////\n\nfunction test_roles() {\n    console.log(\"TEST\", sort_roles([\"active\", \"owner\", \"posting\"]))\n    console.log(\"TEST\", sort_roles([\"posting\", \"active\", \"owner\"]))\n    console.log(\"TEST\", sort_roles([\"active\", \"owner\"]))\n}\n\n//test_roles();","const viz = require(\"viz-js-lib\");\n\nexport const SIGN_TYPE = {\n    PASSWORD: \"password\",\n    WIF: \"wif\",\n}\n\n/**\n * Подпись и отправка транзакции. Имплементация взята из golos-js.broadcast.send и адаптирована под свои нужды.\n * @param {operation/Transaction} transaction \n * @param {SIGN_TYPE} sign_type \n * @param {string} account \n * @param {string} password \n * @returns \"Возвращает данные о созданной транзакции\"\n */\nasync function signandsend(transaction, sign_type, account, password) {\n    const {raw_transaction, required_wif} = transaction;\n\n    //Получаем ключ из аккаунта и пароля, если передан пароль\n    const wif = getWif(sign_type, account, password, required_wif);\n\n    //Формируем объект транзакции и объект с ключем\n    const tx = {extensions: [], operations: raw_transaction}; \n    const key = {[required_wif]: wif};\n\n    //Подготавливаем транзакцию используя метод библиотеки. Получаем блок референсный блок, выставляем expiration.\n    const prepared_tx = await viz.broadcast._prepareTransaction(tx);\n    \n    //Подписываем транзакцию ключем\n    const signed_tx = viz.auth.signTransaction(prepared_tx, key);\n\n    //Отправляем транзакцию ноде и в ответ получаем ID транзакции и блок.\n    let ret = await viz.api.broadcastTransactionSynchronousAsync(signed_tx);\n    return ret;\n}\n\n/**\n * Генерирует из имени аккаунта и мастер-пароля ключ нужного уровня доступа. \n * Или возвращает пароль как есть, в надежде, что это приватный ключ.\n * @param {SIGN_TYPE} sign_type - Тип подписи. Аккаунт + пароль или приыватный ключ.\n * @param {string} account - Аккаунт голос\n * @param {string} password - Пароль или приватный ключ\n * @param {string} required_wif - Требуемый уровень доступа - owner, active, posting или memo\n * @returns \"Возвращает необходимый для подписи ключ.\"\n */\nfunction getWif(sign_type, account, password, required_wif) {\n    switch(sign_type) {\n        case SIGN_TYPE.PASSWORD:\n            const wifs = viz.auth.getPrivateKeys(account, password, [required_wif]);\n            return wifs[required_wif];\n        default:\n            return password;\n    }\n}\n\n/**\n * Проверяет, существует ли аккаунт с таким именем. Для этого пробует загрузить данные аккаунта.\n * @param {string} account \n * @returns Возвращет текст с сообщением об ошибке.\n */\nexport async function checkAccount(account) {\n    if(!account) {\n        return \"Аккаунт обязателен для аутентификации паролем\";\n    }\n    const [acc] = await viz.api.getAccountsAsync([account]);\n    if(!acc) {\n        return \"Аккаунт с таким именем не существует!\";\n    }\n    return null;\n}\n\nexport default signandsend;","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\n\nconst ERROR_DESC = {\n    \"Expected version\": \"Вероятно введенный ключ не является приватным ключем, неверный формат, пропущенный знак\",\n    \"3020100\": \"Введенный ключ либо недостаточного уровня либо отсутствует в ауторити пользователя, неверный пароль\",\n    \"2020000\": \"Недостаточно средств на счету пользователя\",\n    \"3080000\": \"Повторная транзакция с такими же параметрами в блоке\",\n    \"2030000\": \"Ошибка в операции с указанным индексом\",\n    \"1020400\": \"Неверное переданное значение\",\n    \"4020100\": \"Значение находится вне заданных пределов\",\n    \"3010000\": \"Ошибочная операция в транзакции\",\n}\n\nfunction getDesc(msg) {\n    for(let pattern in ERROR_DESC) {\n        if(msg.match(pattern)) {\n            return ERROR_DESC[pattern];\n        }\n    }\n    return null;\n}\n\nexport class SignErrorsView extends Component {\n    static propTypes = {\n        error: PropTypes.object,\n        result: PropTypes.object,\n        redirect: PropTypes.string,\n    }\n\n    extractErrorMessage() {\n        const error = this.props.error;\n        console.log(\"error\", error);\n        let ret = [<h4 key=\"head\">Ошибка отправки транзакции</h4>];\n        if(error.message) {\n            let arr = error.message.split(\"\\n\");\n            for(let i = 0; i < arr.length; i++) {\n                if(arr[i] && !arr[i].match(/for the full error payload/)) {\n                    ret.push(<p key=\"error-text\" className=\"mb-0\">{arr[i]}</p>);\n                    const desc = getDesc(arr[i]);\n                    if(desc) {\n                        ret.push(<small key=\"error-desc\" className=\"mb-0\">{desc}</small>);\n                    }                    \n                }\n            }\n        }\n\n        return ret;\n    }\n\n    extractUsefulInfos() {\n        console.log(\"ret\", this.props.result);\n        return <div>\n            <h4>Отправлено!</h4>\n                <p className=\"mb-0\">Номер блока: {this.props.result.block_num}</p>\n                <p className=\"mb-0\">ID транзакции: {this.props.result.id}</p>\n                {this.props.redirect && <p className=\"mt-2\">Вы будете автоматически перенаправлены на адрес <strong>{this.props.redirect}</strong>...</p>\n                }\n            </div>;\n    }\n\n    render() {\n        const isError = !!this.props.error;\n        const alert = isError? \"danger\" : \"success\"\n        const message = isError?this.extractErrorMessage():this.extractUsefulInfos();\n        return (\n            <div className={\"mt-5 mb-5 alert alert-\"+ alert} role=\"alert\">\n                {message}\n            </div>\n        )\n    }\n}\n\nexport default SignErrorsView\n","import React from 'react'\nimport {SIGN_TYPE} from \"../service/sign\";\n\nfunction translate_role(role) {\n    console.log(\"translate role\", role);\n    switch(role) {\n        case \"owner\": return \"приватный ключ владельца\"; \n        case \"active\": return \"приватный, активный ключ\"; \n        case \"posting\": return \"приватный, постинг ключ\"; \n        case \"memo\": return \"приватный, ключ для заметок\"; \n        default:\n            return null;\n    }\n}\n\nexport const WifInput = (props) => {\n    const wif_class = (props.wif_error?\" is-invalid\":\"\");\n    return (\n        <input id={props.id} name={props.id}\n            value={props.wif}\n            onChange={(ev) => props.onChange(\"wif\", ev.target.value)}\n            type=\"password\"\n            className={\"form-control\" + wif_class}\n            aria-describedby=\"wif-help\"\n            required />\n    );\n}\n\n\nexport const TabButton = (props) => {\n    const { active } = props;\n    const active_class = active ? \" active \" : \"\";\n    return (\n        <li className=\"nav-item\">\n            <button className={\"btn nav-link \" + active_class} onClick={props.selectForm}>{props.label}</button>\n        </li>\n    )\n}\n\nexport const SignButton = (props) => {\n    return (\n        <div className=\"form-group input-group-sm\">\n            <button type=\"button\" id=\"sign-botton\" className=\"btn btn-primary\" onClick={props.onSign}>Отправить</button>\n        </div>\n    )\n}\n\nexport const FormWif = (props) => {\n    const {transaction, form_class, wif_error} = props;\n    return (\n        <form id=\"sign-form\" className={form_class}>\n            <div className=\"form-group input-group-sm\">\n                <label htmlFor=\"wif\">Приватный ключ</label>\n\n                <WifInput id=\"wif\" {...props} />\n\n                <small id=\"wif-help\" className=\"form-text text-muted\">Для подписи транзакции требуется как минимум <strong>{translate_role(transaction.required_wif)}</strong></small>\n                <div className=\"invalid-feedback\">{wif_error}</div>\n            </div>\n            <SignButton  {...props} />\n        </form>\n    )\n}\n\nexport const FormAccountAndPasswort = (props) => {\n    const {form_class, onChange, account, account_error, wif_error} = props;\n    const account_class = (account_error?\" is-invalid\":\"\");\n    return (\n        <form id=\"sign-form\" className={form_class}>\n            <div className=\"form-group input-group-sm\">\n                <label htmlFor=\"account\">Имя пользователя</label>\n\n                <input\n                    id=\"account\"\n                    name=\"account\"\n                    value={account}\n                    onChange={(ev) => onChange(\"account\", ev.target.value)}\n                    type=\"text\"\n                    className={\"form-control\" + account_class}\n                    placeholder=\"Аккаунт в блокчейне viz\"\n                    required />\n\n                <div className=\"invalid-feedback\">{account_error}</div>\n            </div>\n            <div className=\"form-group input-group-sm\">\n                <label htmlFor=\"wif\">Пароль</label>\n\n                <WifInput id=\"password\" {...props} />\n\n                <div className=\"invalid-feedback\">{wif_error}</div>\n            </div>\n\n            <SignButton  {...props}/>\n        </form>\n    )\n}\n\nexport const FormSelector = (props) => {\n\n    switch (props.sign_type) {\n        case SIGN_TYPE.WIF:\n            return <FormWif {...props} />;\n        default:\n            return <FormAccountAndPasswort {...props} />;\n    }\n}\n\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { Transaction } from \"../service/operation\";\nimport signandsend, {SIGN_TYPE, checkAccount} from \"../service/sign\";\nimport SignErrorsView from './SignErrorsView';\nimport MediaQuery from 'react-responsive';\n\nimport {FormSelector} from \"./SignFormComponents\";\nimport {FaKey, FaUser} from \"react-icons/fa\";\n\nexport class SignForm extends Component {\n\n    static propTypes = {\n        transaction: PropTypes.instanceOf(Transaction).isRequired\n    }\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            wif: \"\",\n            account: props.user || \"\",\n            error: null,\n            result: null,\n            sign_type: SIGN_TYPE.PASSWORD,\n            account_error : null,\n            sending: false,\n            redirect: null,\n        }\n    }\n\n    /**\n     * Собственно отправка транзакции\n     */\n    send() {\n        signandsend(this.props.transaction, this.state.sign_type, this.state.account, this.state.wif)\n            .then(result => this.onSuccess(result))\n            .catch(error => this.setState({ result: null, error, account_error: null, sending: false }));\n        this.setState({sending:true, error: null, result: null});\n    }\n\n    onSuccess(result) {\n        this.setState({ result, error: null, account_error: null, sending: false })\n        this.redirect();\n    }\n\n    redirect() {\n        if(!this.props.redirect) {\n            return;\n        }\n\n        setTimeout(() => {window.location = this.props.redirect}, 5 * 1000);\n    }\n\n    onSign() {\n        //Валидация форм.\n        switch(this.state.sign_type) {\n            case SIGN_TYPE.PASSWORD:\n                    let wif_error = null;\n                    if(!this.state.wif) {\n                        wif_error = \"Пароль обязателен\";\n                    }\n\n                    checkAccount(this.state.account).then(account_error => {\n                    if(account_error || wif_error) {\n                        this.setState({account_error, wif_error});\n                    } else {\n                        //При отсутствии ошибок оправить транзакцию\n                        this.send();\n                    }\n                }).catch(error => {\n                    console.error(\"Ошибка проверки аккаунта\");\n                    this.setState({account_error: \"Не получилось проверить аккаунт\"});\n                })\n\n                break;\n            default:\n                if(!this.state.wif) {\n                    this.setState({wif_error: \"Приватный ключ обязателен\"})\n                    return;\n                }\n                //При отсутствии ошибок оправить транзакцию\n                this.send();\n        }\n    }\n\n    onChange(key, value) {\n        console.log(\"onChange\", key, value)\n        this.setState({[key]:value, wif_error:null, account_error:null});\n    }\n\n    render() {\n        const {nowif, redirect} = this.props;\n        let form_class = \"needs-validation\";\n\n        const TabButton = (props) => {\n            const { sign_type } = props;\n            const active = this.state.sign_type === sign_type ? \" active \" : \"\";\n            return (<li className=\"nav-item\"><button  type=\"button\" className={\"btn btn-block nav-link \" + active} onClick={() => this.setState({ sign_type })}>{props.label}</button></li>)\n        }\n\n        const BottomToggler = (props) => {\n            if(nowif) {\n                const is_pass = this.state.sign_type === SIGN_TYPE.PASSWORD;\n                const icon = is_pass?<FaKey />:<FaUser />;\n                const sign_type =  is_pass?SIGN_TYPE.WIF:SIGN_TYPE.PASSWORD;\n                const title = is_pass?\"Подпись ключом\":\"Подпись паролем\";\n                return <button type=\"button\" title={title} \n                    className=\"btn-outline-primary float-right btn btn-sm btn-primary\" \n                    onClick={() => this.setState({ sign_type })}>{icon}</button>;\n            }\n            return null;\n        }\n\n        return (\n            <div className=\"clearfix border p-2 m-2\">\n                {!nowif && <div className=\" mb-3\">\n                \n                {(!this.state.sending && !this.state.result) && \n                <div>\n                <MediaQuery minWidth={425}>\n                    <ul className=\"nav nav-tabs\">\n                        <TabButton label=\"Подпись паролем\" sign_type={SIGN_TYPE.PASSWORD} />\n                        <TabButton label=\"Подпись ключом\" sign_type={SIGN_TYPE.WIF} />\n                    </ul>\n                </MediaQuery>\n                <MediaQuery maxWidth={420}>\n                    <ul className=\"nav nav-pills nav-justified\">\n                        <TabButton label=\"Подпись паролем\" sign_type={SIGN_TYPE.PASSWORD} />\n                        <TabButton label=\"Подпись ключем\" sign_type={SIGN_TYPE.WIF} />\n                    </ul>\n                </MediaQuery>\n                </div>\n                }\n\n                </div>}\n                \n                {(this.state.error || this.state.result) && <SignErrorsView error={this.state.error} result={this.state.result} redirect={redirect} />}\n                {this.state.sending && <div className={\"mt-5 mb-5 alert alert-warning\"} role=\"alert\">\n                    <h4>Отправка...</h4>\n                    </div>\n                }\n\n                {(!this.state.sending && !this.state.result) && \n                    <FormSelector \n                        onChange={(key,value) => this.onChange(key, value)}\n                        onSign={() => this.onSign()}\n                        form_class={form_class}\n                        {...this.state}\n                        {...this.props}\n                    />\n                }\n                {(!this.state.sending && !this.state.result) &&  <BottomToggler /> }\n            </div>\n        )\n    }\n}\n\nexport default SignForm\n","import React from 'react'\n\nexport function getOpDetails(op) {\n    switch(op.name) {\n        case \"transfer\":\n            return <div className=\"md-2 border-bottom\">\n                <strong>От</strong> {op.body.from}, <strong>Кому</strong> {op.body.to}, <strong>Сумма</strong> {op.body.amount}\n                <br /><strong>Заметка</strong> {(\"\"+op.body.memo || \"\").substring(0, 50)}\n            </div>;\n        default:\n            return <pre>{JSON.stringify(op.body, null, 2)}</pre>;\n    }\n}\n\nconst OP_TRANSLATIONS = {\n    vote: \"Апвоут\", \n    comment: \"Пост/Комментарий\", \n\n    transfer: \"Перевод\", \n    transfer_to_vesting: \"Перевод в СГ\", \n    withdraw_vesting: \"Понижение СГ\", \n\n    limit_order_create: \"Создать ордер\", \n    limit_order_cancel: \"Отменить ордер\", \n\n    account_create: \"Создать аккаунт\", \n    account_update: \"Обновить аккаунт\", \n\n    witness_update: \"Обновить делегата\", \n    account_witness_vote: \"Проголосовать за делегата\", \n    account_witness_proxy: \"Назначить доверенного\", \n\n    custom: \"custom\", \n\n    report_over_production: \"Настучать\", \n\n    delete_comment: \"Удалить пост или комментарий\", \n    custom_json: \"Кастомная операция\", \n    comment_options: \"Настроить пост/комментарий\", \n    set_withdraw_vesting_route: \"Установить путь понижения СГ\", \n    limit_order_create2: \"Создать ордер 2\", \n    challenge_authority: \"challenge_authority\", \n    prove_authority: \"prove_authority\", \n    request_account_recovery: \"request_account_recovery\", \n    recover_account: \"recover_account\", \n    change_recovery_account: \"change_recovery_account\", \n    escrow_transfer: \"escrow_transfer\", \n    escrow_dispute: \"escrow_dispute\", \n    escrow_release: \"escrow_release\", \n    pow2: \"Proof of Work 2\", \n    escrow_approve: \"escrow_approve\", \n    transfer_to_savings: \"Перевести в сейф\", \n    transfer_from_savings: \"Вывести из сейфа\", \n    cancel_transfer_from_savings: \"Отменить вывод из сейфа\", \n    custom_binary: \"Кастомная операция (бин.)\", \n    decline_voting_rights: \"Отказаться от голосования (необратимая операция!)\", \n    reset_account: \"reset_account\", \n    set_reset_account: \"set_reset_account\", \n    delegate_vesting_shares: \"delegate_vesting_shares\", \n    account_create_with_delegation: \"account_create_with_delegation\", \n    account_metadata: \"Обновить профиль\", \n    proposal_create: \"proposal_create\", \n    proposal_update: \"proposal_update\", \n    proposal_delete: \"proposal_delete\", \n    chain_properties_update: \"Обновить параметры сети\", \n    break_free_referral: \"Откупиться\", \n    delegate_vesting_shares_with_interest: \"Делегирование с отчислением процента\", \n    reject_vesting_shares_delegation: \"Отказаться от делегирования\",   \n}\n\nexport function getOpName(op) {\n    let name = OP_TRANSLATIONS[op.name];\n    if(!name) name = op.name;\n\n    return <span className=\"label label-default\">{name}</span>\n}","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { Transaction } from \"../service/operation\";\nimport SignForm from './SignForm';\nimport {getOpDetails, getOpName} from \"./OperationDetails\";\n\nexport class TransactionView extends Component {\n    static propTypes = {\n        transaction: PropTypes.instanceOf(Transaction).isRequired\n    }\n\n    constructor(props) {\n        super(props);\n        this.status = {\n\n        }\n    }\n\n    render() {\n\n        return (\n            <div className=\"container\">\n                <div className=\"row \">\n                    <div className=\"col-sm-12\">\n                        <SignForm {...this.props} />\n                    </div>\n                </div>\n\n                <div className=\"row\">\n                    <div className=\"col-sm-12\">\n                    <div className=\" border m-2 p-2\">\n                        <div className=\"alert alert-info\" role=\"alert\">\n                            <h4>Содержимое</h4>\n                        </div>\n\n\n                        <div className=\"container\">\n                                {this.props.transaction.ops.map((op, i) => (\n                                <div className=\"row\" key={i}>\n                                    <div className=\"col-sm-3\"><div className=\"font-weight-bold\">Операция</div>{getOpName(op)}<div><small>{op.name}</small></div></div>\n                                    <div className=\"col-sm-9\"><div className=\"font-weight-bold\">Детальная информация</div>{getOpDetails(op)}</div>\n                                </div>\n                                ))\n                                }\n                        </div>\n                    </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default TransactionView\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\n\nexport class ErrorsView extends Component {\n    static propTypes = {\n        errors: PropTypes.arrayOf(Object).isRequired\n    }\n\n    render() {\n        return (\n            <div>\n                <div className=\"alert alert-danger\" role=\"alert\">\n                <h4>Полученная на подпись транзакция содержит ошибки</h4>\n                </div>\n                <table className=\"table table-sm\">\n                    <thead>\n                        <tr>\n                            <th>Тип ошибки</th>\n                            <th>Место в данных</th>\n                            <th>Схема</th>\n                            <th>Сообщение</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                    {this.props.errors.map((e, i) => <tr key={i}>\n                        <td>{e.keyword}</td>\n                        <td>{e.dataPath}</td>\n                        <td>{e.schemaPath}</td>\n                        <td>{e.message}</td>\n                    </tr>)}\n                    </tbody>\n                </table>\n            </div>\n        )\n    }\n}\n\nexport default ErrorsView\n","import queryString from \"query-string\";\nimport React, { Component } from 'react';\nimport './App.css';\n\nimport TransactionView from \"./TransactionView\";\n\nimport \"bootstrap/dist/css/bootstrap.css\"\nimport { Transaction } from \"../service/operation\";\nimport ErrorsView from \"./ErrorsView\";\nimport viz from \"viz-js-lib\";\n\nimport sanatizer from \"@braintree/sanitize-url\";\n\nfunction checkWorkingNode() {\n    const NODES = [\n        \"wss://solox.world/ws\",\n        \"wss://viz.lexa.host/ws\",\n    ];\n    let node = localStorage.getItem(\"node\") || NODES[0];\n    const idx = Math.max(NODES.indexOf(node), 0);\n    let checked = 0;\n    const find = (idx) => {\n        if (idx >= NODES.length) {\n            idx = 0;\n        }\n        if (checked >= NODES.length) {\n            alert(\"no working nodes found\");\n            return;\n        }\n        node = NODES[idx];\n        console.log(\"check\", idx, node);\n        viz.config.set(\"websocket\", node);\n        try {\n            viz.api.stop();\n        } catch(e) {\n        }\n        \n        let timeout = false;\n        let timer = setTimeout(() => {\n            console.log(\"timeout\", NODES[idx])\n            timeout = true;\n            find(idx + 1);\n        }, 3000);\n        viz.api.getDynamicGlobalPropertiesAsync()\n            .then(props => {\n                if(!timeout) {\n                    let check = props.head_block_number;\n                    console.log(\"found working node\", node);\n                    localStorage.setItem(\"node\", node);\n                    clearTimeout(timer);\n                }\n            })\n            .catch(e => {\n                console.log(\"connection error\", node, e);\n                find(idx + 1);\n            });\n    }\n    find(idx);\n}\ncheckWorkingNode();\n\nconst ErrorMessage = (props) => {\n    return (\n        <div className=\"mt-5 mb-5 alert alert-danger\" role=\"alert\">\n            <h4>{props.error}</h4>\n        </div>\n    );\n}\n\nclass App extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            transaction: null,\n            errors: null,\n            error: null\n        }\n    }\n\n    componentDidMount() {\n        const params = queryString.parse(window.location.search);\n        const title = (params[\"title\"] || \"Визирь\");\n        const subtitle = (params[\"subtitle\"]);\n        const nowif = Object.keys(params).includes(\"nowif\");\n        const user = params[\"user\"];\n        let redirect = sanatizer.sanitizeUrl(params[\"redirect\"] || \"\");\n\n        if(redirect === \"about:blank\") {\n            redirect = null;\n        }\n\n        let tr = params[\"tr\"];\n        if (!tr) {\n            console.log(\"Не найден URL параметр tr\");\n            this.setState({ title, subtitle, error: \"Вызов без параметров\" });\n            return;\n        }\n\n        try {\n            //Пробуем распарсить json\n            let json = null;\n            try {\n                json = JSON.parse(tr);\n            } catch (error) {\n                console.log(\"not valid json\", tr);\n                this.setState({ title, subtitle, error: \"Переданная транзакция не является валидным JSON\" });\n                return;\n            }\n            //Проверка транзакции на валидность\n            const transaction = new Transaction(json);\n            this.setState({ transaction, title, subtitle, user, nowif, redirect });\n        } catch (errors) {\n            //обнаружены ошибки\n            console.log(\"found errors\", errors)\n            this.setState({ errors });\n        }\n    }\n\n    render() {\n\n        let content = null;\n        if (this.state.transaction) {\n            content = <TransactionView redirect={this.state.redirect} nowif={this.state.nowif} user={this.state.user} transaction={this.state.transaction} />\n        } else if (this.state.error) {\n            content = <ErrorMessage error={this.state.error} />\n        } else if (this.state.errors) {\n            content = <ErrorsView errors={this.state.errors} />\n        }\n\n        return (\n            <div className=\"container App\">\n                {<div className=\"row\">\n                    <div className=\"col-sm-12\">\n                        <nav className=\"navbar navbar-light \" >\n                            <div>\n                                <h3>{this.state.title}</h3>\n                                {this.state.subtitle && <h5>{this.state.subtitle}</h5>}\n                                <br /><small>Подпись транзакции VIZ\n                                <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"http://golos.io/@ropox/sign\">&nbsp;<span className=\"rounded-circle bg-info text-white font-weight-bold\">&nbsp;?&nbsp;</span></a></small>\n                            </div>\n                        </nav>\n                    </div>\n        </div>}\n                <div className=\"row\">\n                    <div className=\"col-sm-12\">\n                        {content}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}