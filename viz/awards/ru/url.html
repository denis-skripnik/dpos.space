<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Получение токенов из фонда наград VIZ: генерация Url</title>
		<script src="js/jquery.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/viz-js-lib@latest/dist/viz.min.js" type="text/javascript"></script>
        <script src="js/qrcode.min.js"></script>
		<script src="js/helper.js"></script>
    	</head>
<body>
<h1>Форма генерации Url награды</h1>
<p>В полях названия, как в url, а в скобках пояснения.</p>
<form id="AwardUrlForm">
<p><label for="target">target (кого наградить):</label></p>
<p><input type="text" name="target" value=""></p>
<p><label for="energy">Energy (процент энергии, который вы готовы потратить при награде):</label></p>
<p><input type="text" name="energy" id="awarding_energy" value="" onchange="localStorage.setItem('url_energy_percent', this.value)" ></p>
<p><label for="payout">payout (сумма награды). Если вы заполните это поле, оно будет иметь больший преоритет, чем процент энергии:</label></p>
<p><input type="text" name="payout" value=""></p>
<p><label for="custom_sequence">custom_sequence (номер Custom операции, отправленной пользователем, которому предназначена награда. в принципе, можно указать любое число, например, id новости, опубликованной пользователем, в базе данных вашего сайта):</label></p>
<p><input type="text" name="custom_sequence" value=""></p>
<p><label for="memo">Memo (Заметка. Может быть любой текст или идентификация вашего приложения):</label></p>
<p><input type="text" name="memo" value=""></p>
<hr>
<h3>beneficiaries (Бенефициары)</h3>
<p><label for="benef_login">Логин бенефициара: </label></p>
<p><input name="benef_login" id="nick" placeholder="Введите бенефициара" type="text" ></p>
<p><label for="benef_procent">Процент</label></p>
<p><input name="benef_procent" id="per" placeholder="Введите процент" type="text" ></p>
    <p><button type="button" onclick="add()">Добавить</button></p>
        <div id="out">Список пуст.</div>
<hr>
<p><label for="redirect">Ссылка для перенаправления после успешной награды:</label></p>
<p><input type="text" name="redirect" value=""></p>
<p><strong><input type="button" onclick="view_url()" value="Сформировать url"></strong></p>
</form>

<div id="award_url" style="display: none;">
</div>

<script>
if (localStorage.getItem('url_energy_percent')) {
document.getElementById('awarding_energy').value = localStorage.getItem('url_energy_percent');
}

if (localStorage.getItem('energy_percent')) {
document.getElementById('awarding_energy').value = localStorage.getItem('energy_percent');
}
</script>
</body>
</html>